#include <stdio.h>
#include <stdlib.h>

struct no
{
    char letra;
    struct no *prox;
};
typedef struct no Lista;

Lista *insere(Lista *L, char let)
{
    Lista *novo;
    novo = (Lista*)malloc(sizeof(Lista));
    novo->letra = let;
    novo->prox = L;
    return novo;
}

void imprime(Lista *L)
{
    Lista *aux = L;
    while (aux != NULL) {
        printf("%c", aux->letra);
        aux = aux->prox;
    }
    printf("\n");
}

int verifica(Lista *L1, Lista *L3)
{
    Lista *aux1 = L1;
    Lista *aux3 = L3;
    while (aux3 != NULL)
    {
        if (aux1 == NULL || aux1->letra != aux3->letra)
        {
            return 0;
        }
        aux1 = aux1->prox;
        aux3 = aux3->prox;
    }
    return 1;
}

Lista *substitui(Lista *L1, Lista *L3, Lista *L2)
{
    Lista *ant = NULL;
    Lista *aux = L1;

    while (aux != NULL)
    {
        if (verifica(aux, L3))
        {
            while (L3 != NULL)
            {
                aux = aux->prox;
                L3 = L3->prox;
            }

            if (ant == NULL)
            {
                L1 = L2;
            } else
            {
                ant->prox = L2;
            }

            Lista *fim = L2;
            while (fim->prox != NULL)
            {
                fim = fim->prox;
            }

            fim->prox = aux;
            return L1;
        }

        ant = aux;
        aux = aux->prox;
    }
    return L1;
}

int main()
{
    Lista *L1 = NULL;
    Lista *L2 = NULL;
    Lista *L3 = NULL;

    L1 = insere(L1, 'a');
    L1 = insere(L1, 'a');
    L1 = insere(L1, 'f');
    L1 = insere(L1, 'a');
    L1 = insere(L1, 'r');

    L2 = insere(L2, 'x');
    L2 = insere(L2, 'x');
    L2 = insere(L2, 'x');
    L2 = insere(L2, 'x');
    L2 = insere(L2, 'x');
    L2 = insere(L2, 'x');

    L3 = insere(L3, 'a');
    L3 = insere(L3, 'f');

    puts("NA POSICAO QUE L3 APARECER EM L1, O PROGRAMA SUBSTITUI POR L2.");
    printf("Lista L1 antes da substituição:\n");
    imprime(L1);
    printf("Lista L2:\n");
    imprime(L2);
    printf("Lista L3:\n");
    imprime(L3);

    L1 = substitui(L1, L3, L2);

    printf("Lista L1 apos a subs:\n");
    imprime(L1);

    return 0;
}
